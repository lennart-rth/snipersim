# Sniper configuration tuned for running SPEC CPU2017 (x86_64)
# Nehalem-like core

[general]
arch = intel
mode = 64
magic = false
inst_mode_init = cache_only
inst_mode_roi = detailed
inst_mode_end = fast_forward
inst_mode_output = true
syntax = intel
num_host_cores = 0
enable_syscall_emulation = true
enable_icache_modeling = true
total_cores = 4

[log]
enabled = false

[perf_model/core]
frequency = 2.5
type = interval
logical_cpus = 1           # SMT threads per core

[perf_model/core/interval_timer]
dispatch_width = 4
window_size = 128
num_outstanding_loadstores = 10
issue_contention = true

[perf_model/branch_predictor]
type = pentium_m
mispredict_penalty = 8

[perf_model/tlb]
penalty = 30
penalty_parallel = true

[perf_model/l1_icache]
perfect = false
cache_block_size = 64
cache_size = 32            # KB
associativity = 4
replacement_policy = lru
data_access_time = 4
tags_access_time = 1
perf_model_type = parallel
dvfs_domain = core

[perf_model/l1_dcache]
perfect = false
cache_block_size = 64
cache_size = 32            # KB
associativity = 8
replacement_policy = lru
data_access_time = 4
tags_access_time = 1
perf_model_type = parallel
dvfs_domain = core

[perf_model/l2_cache]
perfect = false
cache_block_size = 64
cache_size = 256          # KB
associativity = 8
replacement_policy = lru
data_access_time = 8
tags_access_time = 3
perf_model_type = parallel
dvfs_domain = core

[perf_model/l3_cache]
perfect = false
cache_block_size = 64
cache_size = 8192         # KB (8 MB shared L3)
associativity = 16
replacement_policy = lru
data_access_time = 30
tags_access_time = 10
perf_model_type = parallel
dvfs_domain = global

[perf_model/fast_forward]
model = oneipc

[perf_model/fast_forward/oneipc]
interval = 100000         # ns quantum for fast-forward
include_memory_latency = true
include_branch_misprediction = false

[perf_model/dram]
type = constant
latency = 100             # ns
per_controller_bandwidth = 5  # GB/s
num_controllers = -1

[caching_protocol]
type = parametric_dram_directory_msi
variant = mesi

# Scheduler: pinned cores 
[scheduler]
type = pinned

[scheduler/pinned]
quantum = 1000000
core_mask = 1

[traceinput]
enabled = false
stop_with_first_app = true
restart_apps = false
